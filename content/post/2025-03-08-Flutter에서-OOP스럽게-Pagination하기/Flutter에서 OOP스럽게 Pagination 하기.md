---
title: Flutter에서 OOP스럽게 Pagination 하기
description:
date: 2025-03-08 00:00:00+0000
categories:
tags:
weight: 1
---

Client에서 일반적으로 가장 많이 구현하는 기능이 뭘까? 난 단연 리스트 페이지라고 생각한다. 쿠팡이라면 수많은 상품을 리스팅해야하고, 인스타그램이라면 쏟아지는 피드를 보여줘야한다. 그리고 수많은 데이터를 빠르게 스크롤하면서 탐색하고 끊김없이 불러오는게 중요하다. 리스트를 불러올때는 다양한 상황이 있다. 처음으로 불러올때, 추가로 불러올때, 새로고침, 에러 등 다양한 상황에 대처해야한다. 그리고 이 페이지네이션 기능은 앱 전체에서 이뤄지기 때문에 코드의 재활용성이 중요하다.

## 구현시나리오

배달앱에서 가게 목록을 불러오는 페이지를 만든다고 해보자. 한번에 20개의 가게를 불러올거고, 끝에 다다르면 다음 20개의 가게를 불러올거다. 그리고 맨 위에서는 아래로 당겨 새로고침을 구현한다고 해보자.

## Pagination

DB의 수많은 데이터를 한번에 불러와서 보여주는건 DB에게도, API에게도, 클라이언트에게도 부담이다. 인스타의 초단위로 쏟아지는 피드를 어떻게 다 불러와서 보여주겠나. 그래서 개수로 나눠서 조금씩 불러와서 보여주면서 사용자는 마치 끊임없이 보고있다고 느끼게 해야한다.
Pagination을 구현하는 방법은 2가지로, Page based와 cursor based가 있다. Page based는 전통적인 방식으로

### Page based

전통적인 방식으로 데이터 개수로 페이지를 나누고 페이지를 옮겨다니면서 조회하는 방식이다. 책에서 페이지를 넘기면서 보는 것에서 유래하지 않았을까 싶다. 중간에 페이지를 건너뛸수도 있어서, 빠르게 탐색이 가능하다. 하지만 조회 중간에 데이터 생성이나 삭제가 일어나면 누락되거나 한번 더 보여주는 일이 발생할 수 있다.

### Cursor based

모바일 서비스가 많아지면서 스크롤 마지막에 다다르면 다음 데이터를 불러오는 방식이다. 페이지 베이스처럼 중간에 건너뛸 수는 없지만 이어져서 데이터를 보면서 마치 모든 데이터를 보고있다고 느낄 수 있다. 클라이언트에서 마지막으로 본 데이터 다음부터 불러오기 때문에 중간에 생성이나 삭제가 이뤄져도 반영된 결과를 볼 수 있다. 더 끊김없는 로딩을 위해 스크롤이 끝까지 가기전에 미리 불러오는 등으로 사용자 경험을 향상시킬 수 있다.
